<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UrURL ‚îÇ Profile</title>
    <link rel="stylesheet" href="main.css">
    <script src="ururl-core.js"></script>
    <style>
        body { background: #f8f9fa; display: flex; justify-content: center; padding: 20px; font-family: sans-serif; }
        .v-container { width: 100%; max-width: 400px; display: flex; flex-direction: column; align-items: center; }
        .hidden { display: none !important; }
        
        /* Profile Card Style */
        .profile-card { width: 100%; text-align: center; background: white; border-radius: 25px; padding: 40px 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); margin-top: 20px; }
        .v-img { width: 120px; height: 120px; border-radius: 50%; background-size: cover; background-position: center; margin: 0 auto 20px; background-color: #eee; border: 4px solid white; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        h2 { color: #0A1A3C; margin: 0 0 10px 0; font-size: 24px; }
        .v-bio { color: #666; font-size: 15px; margin-bottom: 30px; line-height: 1.6; white-space: pre-wrap; }
        
        /* Interactive Buttons */
        .v-btn { display: block; width: 100%; padding: 16px; margin-bottom: 12px; border-radius: 12px; text-decoration: none; font-weight: bold; font-size: 14px; transition: transform 0.2s, background 0.2s; box-sizing: border-box; }
        .v-btn-primary { background: #0A1A3C; color: white; }
        .v-btn-outline { background: #fff; color: #0A1A3C; border: 1px solid #e0e0e0; }
        .v-btn:active { transform: scale(0.97); }
    </style>
</head>
<body>

    <div class="v-container">
        <div id="profile-content" class="profile-card hidden">
            <div id="v-img" class="v-img"></div>
            <h2 id="v-n"></h2>
            <p id="v-b" class="v-bio"></p>

            <div id="v-actions">
                <a id="v-l" href="" target="_blank" class="v-btn v-btn-primary hidden">üåê VISIT WEBSITE</a>
                <a id="v-e" href="" class="v-btn v-btn-outline hidden">üìß SEND EMAIL</a>
                <a id="v-c" href="" class="v-btn v-btn-outline hidden">üìû CONTACT</a>
            </div>
        </div>
    </div>

    <script>
        // 1. Get Data from URL
        const params = new URLSearchParams(window.location.search);
        const suitcase = params.get('d');

        // 2. Unpack and Show
        if (!suitcase) {
            document.body.innerHTML = "<div style='margin-top:50px; text-align:center;'><h2>Profile not found.</h2><p>Please check the link.</p></div>";
        } else {
            const data = UrURL.unpack(suitcase);
            if (data) {
                render(data);
            } else {
                document.body.innerHTML = "<div style='margin-top:50px; text-align:center;'><h2>Data Error.</h2><p>The profile key is invalid.</p></div>";
            }
        }

        // 3. Render Function
        function render(d) {
            // Show card
            document.getElementById('profile-content').classList.remove('hidden');

            // Fill text fields
            document.getElementById('v-n').innerText = d.n;
            document.getElementById('v-b').innerText = d.b;
            
            // Set Image
            if (d.p && d.p.trim() !== "") {
                document.getElementById('v-img').style.backgroundImage = `url(${d.p})`;
            } else {
                // Default placeholder if no image
                document.getElementById('v-img').style.backgroundColor = "#0A1A3C";
            }

            // Button Helper
            const setupBtn = (id, val, prefix = "") => {
                const el = document.getElementById(id);
                if (val && val.trim() !== "") {
                    el.href = prefix + val;
                    el.classList.remove('hidden');
                }
            };

            // Link, Email, Contact Buttons
            setupBtn('v-l', d.l);          
            setupBtn('v-e', d.e, "mailto:"); 
            setupBtn('v-c', d.c, "tel:");    
        }
    </script>
</body>
</html>
